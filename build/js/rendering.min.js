"use strict";import{componentFlatArray}from"./get-flat-array.min.js";import{ALL_ID}from"./main.min.js";import{LIST_NOT_FOUND,OUTER_TYPE,INNER_TYPE}from"./main.min.js";import{MAIN_ROOT_LIST,INNER_BOX_FIELD_TEMPLATE,INNER_BOX_ITEM_TEMPLATE,OUTER_BOX_FIELD_TEMPLATE,OUTER_BOX_ITEM_TEMPLATE,SINGLE_FIELD_TEMPLATE}from"./main.min.js";const mainRootList=document.querySelector(MAIN_ROOT_LIST),innerBoxFieldTemplate=document.querySelector(INNER_BOX_FIELD_TEMPLATE),innerBoxItemTemplate=document.querySelector(INNER_BOX_ITEM_TEMPLATE),outerBoxFieldTemplate=document.querySelector(OUTER_BOX_FIELD_TEMPLATE),outerBoxItemTemplate=document.querySelector(OUTER_BOX_ITEM_TEMPLATE),singleFieldTemplate=document.querySelector(SINGLE_FIELD_TEMPLATE);let components=[];function createHtmlStructure(e){let t=document.createDocumentFragment();e.forEach((e=>{let{parentId:n,id:o,name:r,children:l}=e;if(0===n&&!1===l){setFormField(createSingleField(o,r),t)}if(0===n&&!0===l){setFormField(createOuterBoxField(o,r),t)}if(0!==n&&!0===l){if(getTypeOfParentBox(n,t)!==LIST_NOT_FOUND){setComponent(createInnerBoxField(o,r),t,n)}}if(0!==n&&!1===l){let e=getTypeOfParentBox(n,t);if(e===OUTER_TYPE){setComponent(createOuterBoxItem(o,r),t,n)}if(e===INNER_TYPE){setComponent(createInnerBoxItem(o,r),t,n)}}})),mainRootList.append(t),components.length=0}function setFormField(e,t){t.append(e)}function createSingleField(e,t){return setIdAndLabel(singleFieldTemplate.cloneNode(!0).content,e,t)}function createOuterBoxField(e,t){return setIdLabelAndSummary(outerBoxFieldTemplate.cloneNode(!0).content,e,t)}function getTypeOfParentBox(e,t){let n=LIST_NOT_FOUND,o=t.querySelector(`ul[id="${String(e)}"]`);return o&&(n=o.dataset.list),n===LIST_NOT_FOUND&&console.log(`не найден родительский список id=${e}`),n}function createOuterBoxItem(e,t){return setIdAndLabel(outerBoxItemTemplate.cloneNode(!0).content,e,t)}function createInnerBoxItem(e,t){return setIdAndLabel(innerBoxItemTemplate.cloneNode(!0).content,e,t)}function createInnerBoxField(e,t){return setIdLabelAndSummary(innerBoxFieldTemplate.cloneNode(!0).content,e,t)}function setIdAndLabel(e,t,n){e.querySelector("input").id=String(t);let o=e.querySelector("label");return o.setAttribute("for",t),o.textContent=n,e}function setIdLabelAndSummary(e,t,n){e.querySelector("summary").textContent=n,e.querySelector("ul").id=t;let o=e.querySelector("input"),r=ALL_ID+String(t);o.id=r;let l=e.querySelector("label");return l.setAttribute("for",r),l.textContent=`Все ${n.toLowerCase()}`,e}function setComponent(e,t,n){t.querySelector(`ul[id="${String(n)}"]`).append(e)}componentFlatArray&&(components=componentFlatArray),createHtmlStructure(components);