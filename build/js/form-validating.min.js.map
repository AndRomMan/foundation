{"version":3,"sources":["form-validating.js"],"names":["CHECKBOX","ZERO_LEVEL_ID","ALL_ID","ROOT_LIST","submitButton","document","querySelector","initFormSubmitButton","addEventListener","submitButtonClickHandler","evt","preventDefault","checkedInputArray","getCheckedInputArray","idArray","getJoinedIdArray","getParentArray","clearForm","sendToServer","checkBoxClass","checkedInputs","querySelectorAll","Array","from","elementArray","parentArray","forEach","element","getClosestParents","closestParent","closest","push","id","parentElement","getIdArray","childrenArray","joinedArray","getFilteredArray","Set","inputSet","delete","value","startsWith","inputArray","setTimeout","checked","data","console","log"],"mappings":"AACA,aAEA,MAAMA,SAAW,wBACXC,cAAgB,IAChBC,OAAS,OACTC,UAAY,KAElB,IAAIC,aAAeC,SAASC,cAAc,iBAI1C,SAASC,uBACHH,cACFA,aAAaI,iBAAiB,QAASC,0BAI3C,SAASA,yBAAyBC,GAChCA,EAAIC,iBAEJ,IAAIC,EAAoBC,uBAIpBC,EAAUC,iBAAiBH,EAHbI,eAAeJ,IAMjCK,UAAUL,GAGVM,aAAaJ,GAGf,SAASD,uBACP,IAAIM,EAAgB,IAAInB,WACpBoB,EAAgBf,SAASgB,iBAAiB,GAAGF,aACjD,OAAOG,MAAMC,KAAKH,GAGpB,SAASJ,eAAeQ,GACtB,IAAIC,EAAc,GAMlB,OAJAD,EAAaE,SAASC,IACpBC,kBAAkBD,EAASF,MAGtBA,EAGT,SAASG,kBAAkBD,EAASF,GAClC,IAAII,EAAgBF,EAAQG,QA7CZ,MAgDhB,GAFAL,EAAYM,KAAKF,GAEQ,MAArBA,EAAcG,GAAY,CAE5BJ,kBADyBC,EAAcI,cACDR,IAI1C,SAASS,WAAWV,GAClB,IAAIV,EAAU,GAId,OAHAU,EAAaE,SAASC,IACpBb,EAAQiB,KAAKJ,EAAQK,OAEhBlB,EAGT,SAASC,iBAAiBoB,EAAeV,GACvC,IAEIW,EAAc,IAFIF,WAAWC,MACbD,WAAWT,IAK/B,OADoBY,iBAFE,IAAIC,IAAIF,IAMhC,SAASC,iBAAiBE,GAMxB,OALAA,EAASC,OA3EW,KA4EpBD,EAASb,SAASe,IACZA,EAAMC,WA5EC,SA4EmBH,EAASC,OAAOC,MAGzCnB,MAAMC,KAAKgB,GAGpB,SAAStB,UAAU0B,GACjBC,YAAW,KACTD,EAAWjB,SAASC,IAClBA,EAAQkB,SAAU,OAEnB,KAGL,SAAS3B,aAAa4B,GACpBC,QAAQC,IAAIF,GAtFdvC","file":"form-validating.min.js","sourcesContent":["/* eslint-disable no-console */\n'use strict';\n\nconst CHECKBOX = 'checkbox-block__input';\nconst ZERO_LEVEL_ID = '0';\nconst ALL_ID = 'all-';\nconst ROOT_LIST = 'ul';\n\nlet submitButton = document.querySelector('.form__button');\n\ninitFormSubmitButton();\n\nfunction initFormSubmitButton() {\n  if (submitButton) {\n    submitButton.addEventListener('click', submitButtonClickHandler);\n  }\n}\n\nfunction submitButtonClickHandler(evt) {\n  evt.preventDefault();\n  // находим все checked input\n  let checkedInputArray = getCheckedInputArray();\n  let parentArray = getParentArray(checkedInputArray);\n\n  // получаем массив id родителей (списки) и детей (input)\n  let idArray = getJoinedIdArray(checkedInputArray, parentArray);\n\n  // делаем сброс отмеченных input\n  clearForm(checkedInputArray);\n\n  // отправляем данные на сервер\n  sendToServer(idArray);\n}\n\nfunction getCheckedInputArray() {\n  let checkBoxClass = `.${CHECKBOX}`;\n  let checkedInputs = document.querySelectorAll(`${checkBoxClass}:checked`);\n  return Array.from(checkedInputs);\n}\n\nfunction getParentArray(elementArray) {\n  let parentArray = [];\n\n  elementArray.forEach((element) => {\n    getClosestParents(element, parentArray);\n  });\n\n  return parentArray;\n}\n\nfunction getClosestParents(element, parentArray) {\n  let closestParent = element.closest(ROOT_LIST);\n  parentArray.push(closestParent);\n\n  if (closestParent.id !== '0') {\n    let upToParentOfParent = closestParent.parentElement;\n    getClosestParents(upToParentOfParent, parentArray);\n  }\n}\n\nfunction getIdArray(elementArray) {\n  let idArray = [];\n  elementArray.forEach((element) => {\n    idArray.push(element.id);\n  });\n  return idArray;\n}\n\nfunction getJoinedIdArray(childrenArray, parentArray) {\n  let childrenIdArray = getIdArray(childrenArray);\n  let parentIdArray = getIdArray(parentArray);\n  let joinedArray = [...childrenIdArray, ...parentIdArray];\n  let uniqueJoinedSet = new Set(joinedArray);\n  // убираем лишние id: '0' и начинающиеся с 'all-'\n  let filteredArray = getFilteredArray(uniqueJoinedSet);\n  return filteredArray;\n}\n\nfunction getFilteredArray(inputSet) {\n  inputSet.delete(ZERO_LEVEL_ID);\n  inputSet.forEach((value) => {\n    if (value.startsWith(ALL_ID)) inputSet.delete(value);\n  });\n\n  return Array.from(inputSet);\n}\n\nfunction clearForm(inputArray) {\n  setTimeout(() => {\n    inputArray.forEach((element) => {\n      element.checked = false;\n    });\n  }, 1000);\n}\n\nfunction sendToServer(data) {\n  console.log(data);\n}\n"]}