"use strict";import{FORM_BUTTON,ALL_ID,CHECKBOX,ROOT_LIST,ZERO_LEVEL_ID}from"./main.min.js";let submitButton=document.querySelector(`.${FORM_BUTTON}`);function initFormSubmitButton(){submitButton&&submitButton.addEventListener("click",submitButtonClickHandler)}function submitButtonClickHandler(e){e.preventDefault();let t=getCheckedInputArray(),r=getJoinedIdArray(t,getParentArray(t));clearForm(t),sendToServer(r)}function getCheckedInputArray(){let e=`.${CHECKBOX}`,t=document.querySelectorAll(`${e}:checked`);return Array.from(t)}function getParentArray(e){let t=[];return e.forEach((e=>{getClosestParents(e,t)})),t}function getClosestParents(e,t){let r=e.closest(ROOT_LIST);if(t.push(r),"0"!==r.id){getClosestParents(r.parentElement,t)}}function getIdArray(e){let t=[];return e.forEach((e=>{t.push(e.id)})),t}function getJoinedIdArray(e,t){let r=[...getIdArray(e),...getIdArray(t)];return getFilteredNumberArray(new Set(r))}function getFilteredNumberArray(e){return e.delete(ZERO_LEVEL_ID),e.forEach((t=>{t.startsWith(ALL_ID)&&e.delete(t)})),Array.from(e).map((e=>Number(e)))}function clearForm(e){setTimeout((()=>{e.forEach((e=>{e.checked=!1}))}),1e3)}function sendToServer(e){0===e.length?console.log("Нет данных для отправки на сервер"):console.log(e)}initFormSubmitButton();
//# sourceMappingURL=form-validating.min.js.map
